<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cib.cap4j.cfn.common.arcuserauth.dao.IIPArcUserAuthDao">
	<resultMap id="arcuserauthVO_result" type="com.cib.cap4j.cfn.common.arcuserauth.vo.IPArcUserAuthVO">
        <id column="YHDLXXZJ" property="yhdlxxzj" />
        <result column="YHBH" property="yhbh" />
        <result column="DLM" property="dlm" />
        <result column="DLMM" property="dlmm" />
        <result column="MMSBCS" property="mmsbcs" />
        <result column="MMGQSJ" property="mmgqsj" />
        <result column="MMYXQ" property="mmyxq" />
        <result column="ZHGQSJ" property="zhgqsj" />
        <result column="ZHYCDLIP" property="zhycdlip" />
        <result column="ZHYCDLSJ" property="zhycdlsj" />
        <result column="SCDLIP" property="scdlip" />
        <result column="SCDLSJ" property="scdlsj" />
        <result column="CJR" property="cjr" />
        <result column="CJSJ" property="cjsj" />
        <result column="ZHXGR" property="zhxgr" />
        <result column="ZHXGSJ" property="zhxgsj" />
        <result column="JLZT" property="jlzt" />
        <result column="SFTB" property="sftb" />
        <result column="YXQQSJ" property="yxqqsj" />
        <result column="ZHYCXTQQSJ" property="zhycxtqqsj" />
        <result column="YHZXZT" property="yhzxzt" />
    </resultMap>
	
  	<select id="getAllCount" resultType="int">
        select count(*) from IP_ARCUSERAUTH where JLZT != '0'
    </select>
    
    <select id="findAll" resultMap="arcuserauthVO_result">
        select * from IP_ARCUSERAUTH where JLZT != '0'
    </select>
    
    <select id="findCertain" resultMap="arcuserauthVO_result" parameterType="com.cib.cap4j.cfn.common.arcuserauth.vo.IPArcUserAuthVO">
        select * from IP_ARCUSERAUTH where JLZT != '0'
        <if test="yhbh != null"> and YHBH = #{yhbh}</if>
        <if test="dlm != null">and DLM = #{dlm}</if>
    </select>
    
    <select id="findByUserName" resultMap="arcuserauthVO_result" parameterType="java.util.HashMap">
        select a.* from IP_ARCUSERAUTH a, IP_STAFF s where a.YHBH = s.YHBH and a.JLZT != '0'
		and s.YHDLM = #{userName}
    </select>
    
    <insert id="save" parameterType="com.cib.cap4j.cfn.common.arcuserauth.vo.IPArcUserAuthVO">
        INSERT INTO IP_ARCUSERAUTH 
        (YHDLXXZJ, YHBH, DLM, DLMM, 
        MMSBCS, MMGQSJ, MMYXQ, ZHGQSJ, 
        ZHYCDLIP, ZHYCDLSJ, SCDLIP, SCDLSJ, 
        CJR, CJSJ, ZHXGR, ZHXGSJ, 
        JLZT, SFTB, YXQQSJ, ZHYCXTQQSJ, 
        YHZXZT)
		values
		(#{yhdlxxzj,jdbcType=VARCHAR}, #{yhbh,jdbcType=VARCHAR}, #{dlm,jdbcType=VARCHAR}, #{dlmm,jdbcType=VARCHAR}, 
		#{mmsbcs,jdbcType=INTEGER}, #{mmgqsj,jdbcType=TIMESTAMP}, #{mmyxq,jdbcType=BIGINT}, #{zhgqsj,jdbcType=TIMESTAMP}, 
		#{zhycdlip,jdbcType=VARCHAR}, #{zhycdlsj,jdbcType=TIMESTAMP}, #{scdlip,jdbcType=VARCHAR}, #{scdlsj,jdbcType=TIMESTAMP}, 
		#{cjr,jdbcType=VARCHAR}, #{cjsj,jdbcType=TIMESTAMP}, #{zhxgr,jdbcType=VARCHAR}, #{zhxgsj,jdbcType=TIMESTAMP}, 
		#{jlzt,jdbcType=VARCHAR}, #{sftb,jdbcType=VARCHAR}, #{yxqqsj,jdbcType=TIMESTAMP}, #{zhycxtqqsj,jdbcType=TIMESTAMP}, 
		#{yhzxzt,jdbcType=VARCHAR})
    </insert>
    
    <update id="update" parameterType="com.cib.cap4j.cfn.common.arcuserauth.vo.IPArcUserAuthVO">
        update IP_ARCUSERAUTH
        	<set>
				<if test="yhbh != null">YHBH = #{yhbh},</if>
				<if test="dlm != null">DLM = #{dlm},</if>
				<if test="dlmm != null">DLMM = #{dlmm},</if>
				<if test="mmsbcs != null">MMSBCS = #{mmsbcs},</if>
				<if test="mmgqsj != null">MMGQSJ = #{mmgqsj},</if>
				<if test="mmyxq != null">MMYXQ = #{mmyxq},</if>
				<if test="zhgqsj != null">ZHGQSJ = #{zhgqsj},</if>
				<if test="zhycdlip != null">ZHYCDLIP = #{zhycdlip},</if>
				<if test="zhycdlsj != null">ZHYCDLSJ = #{zhycdlsj},</if>
				<if test="scdlip != null">SCDLIP = #{scdlip},</if>
				<if test="scdlsj != null">SCDLSJ = #{scdlsj},</if>
				<if test="cjr != null">CJR = #{cjr},</if>
				<if test="cjsj != null">CJSJ = #{cjsj},</if>
				<if test="zhxgr != null">ZHXGR = #{zhxgr},</if>
				<if test="zhxgsj != null">ZHXGSJ = #{zhxgsj},</if>
				<if test="jlzt != null">JLZT = #{jlzt},</if>
				<if test="sftb != null">SFTB = #{sftb},</if>
				<if test="yxqqsj != null">YXQQSJ = #{yxqqsj},</if>
				<if test="zhycxtqqsj != null">ZHYCXTQQSJ = #{zhycxtqqsj},</if>
				<if test="yhzxzt != null">YHZXZT = #{yhzxzt}</if>
			</set>
        where YHDLXXZJ = #{yhdlxxzj}
    </update>
    
    <update id="updateAll" parameterType="com.cib.cap4j.cfn.common.arcuserauth.vo.IPArcUserAuthVO">
        update IP_ARCUSERAUTH
        	<set>
				<if test="jlzt != null">JLZT = #{jlzt},</if>
				<if test="yhzxzt != null">YHZXZT = #{yhzxzt}</if>
			</set>
    </update>
    
    <update id="delete_logic" parameterType="java.util.HashMap">
        update IP_ARCUSERAUTH
        	<set>
        		JLZT = '0', ZHXGR = #{ZHXGR}, ZHXGSJ = #{ZHXGSJ}
			</set>
			where YHBH in
			<foreach item="id" index="index" collection="idArr"
				open="(" separator="," close=")">
				#{id}
			</foreach>
    </update>
    
    <update id="newpwd" parameterType="com.cib.cap4j.cfn.common.arcuserauth.vo.IPArcUserAuthVO">
        update IP_ARCUSERAUTH
        	<set>
				DLMM = #{dlmm,jdbcType=VARCHAR},
				MMSBCS = #{mmsbcs,jdbcType=INTEGER},
				MMGQSJ = #{mmgqsj,jdbcType=TIMESTAMP},
				MMYXQ = #{mmyxq,jdbcType=BIGINT},
				ZHXGR = #{zhxgr,jdbcType=VARCHAR},
				ZHXGSJ = #{zhxgsj,jdbcType=TIMESTAMP}
			</set>
			where YHBH = #{yhbh}
    </update>
    
</mapper>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ipDocumentEncryptGroup">
	<resultMap id="ipDocumentEncryptGroupVOMap_result" type="com.cib.cap4j.cfn.encrypt.vo.IpDocumentEncryptGroupVO">
		<result property="zj" column="ZJ" />
		<result property="qxbm" column="QXBM" />
		<result property="jmjbmc" column="JMJBMC" />
		<result property="jbqx" column="JBQX" />
		<result property="kfdy" column="KFDY" />
		<result property="kffz" column="KFFZ" />
		<result property="kfff" column="KFFF" />
		<result property="kflx" column="KFLX" />
		<result property="qxyxq" column="QXYXQ" />
		<result property="qxksrq" column="QXKSRQ" />
		<result property="qxjzrq" column="QXJZRQ" />
		<result property="bz" column="BZ" />
	</resultMap>
	
	<parameterMap id="ipDocumentEncryptGroupVOMap_parameter" type="com.cib.cap4j.cfn.encrypt.vo.IpDocumentEncryptGroupVO">
		<parameter property="qxbm" jdbcType="CHAR" javaType="String" />
		<parameter property="jmjbmc" jdbcType="CHAR" javaType="String" />
		<parameter property="jbqx" jdbcType="CHAR" javaType="String" />
		<parameter property="kfdy" jdbcType="CHAR" javaType="String" />
		<parameter property="kffz" jdbcType="CHAR" javaType="String" />
		<parameter property="kfff" jdbcType="CHAR" javaType="String" />
		<parameter property="kflx" jdbcType="CHAR" javaType="String" />
		<parameter property="qxyxq" jdbcType="BIGINT" javaType="Long" />
		<parameter property="qxksrq" jdbcType="DATE" javaType="java.util.Date" />
		<parameter property="qxjzrq" jdbcType="DATE" javaType="java.util.Date" />
		<parameter property="bz" jdbcType="CHAR" javaType="String" />
		<parameter property="zj" jdbcType="CHAR" javaType="String" />
	</parameterMap>
	
	<insert id="insertIbDocumentEncryptGroup" parameterMap="ipDocumentEncryptGroupVOMap_parameter">  
        INSERT INTO IP_DOCUMENT_ENCRYPT_GROUP(QXBM,JMJBMC,JBQX,KFDY,KFFZ,KFFF,KFLX,QXYXQ,QXKSRQ,QXJZRQ,BZ,ZJ) 
        VALUES(?,?,?,?,?,?,?,?,?,?,?,?) 
    </insert>
       
    <delete id="deleteIbDocumentEncryptGroup" parameterType="String">  
        DELETE FROM IP_DOCUMENT_ENCRYPT_GROUP WHERE ZJ=#{zj} 
    </delete>   
       
    <update id="updateIbDocumentEncryptGroup" parameterMap="ipDocumentEncryptGroupVOMap_parameter">  
        UPDATE IP_DOCUMENT_ENCRYPT_GROUP SET QXBM=?,JMJBMC=?,JBQX=?,KFDY=?,KFFZ=?,KFFF=?,KFLX=?,QXYXQ=?,QXKSRQ=?,QXJZRQ=?,BZ=? 
        WHERE ZJ=?
    </update>
    
    <select id="findCertainIbDocumentEncryptGroup" resultMap="ipDocumentEncryptGroupVOMap_result">
		SELECT * FROM IP_DOCUMENT_ENCRYPT_GROUP WHERE 1=1 
		<if test="qxbm != null and qxbm != ''">
			AND QXBM LIKE ${qxbm}
		</if>
		<if test="jmjbmc != null and jmjbmc != ''">
			AND JMJBMC LIKE ${jmjbmc}
		</if>
		<if test="jbqx !=null and jbqx != '' ">
			AND JBQX LIKE ${jbqx}
		</if>
		<if test="qxyxq !=null and qxyxq!= '' ">
			AND QXYXQ = #{qxyxq}
		</if>
	</select>
	
	<select id="getSelectedRecordCount" resultType="java.lang.Integer">
		SELECT COUNT(*) FROM IP_DOCUMENT_ENCRYPT_GROUP WHERE 1=1 
		<if test="qxbm != null and qxbm != ''">
			AND QXBM LIKE ${qxbm}
		</if>
		<if test="jmjbmc != null and jmjbmc != ''">
			AND JMJBMC LIKE ${jmjbmc}
		</if>
		<if test="jbqx !=null and jbqx!='' ">
			AND JBQX LIKE ${jbqx}
		</if>
		<if test="qxyxq !=null and qxyxq!='' ">
			AND QXYXQ = #{qxyxq}
		</if>
	</select>
	
	<select id="findByYhbh" parameterType="java.lang.String" resultMap="ipDocumentEncryptGroupVOMap_result">
		SELECT D.* 
		FROM IP_DOCUMENT_ENCRYPT_GROUP  D
		WHERE D.ZJ =(select S.QXZJ FROM IP_DSM_STAFF S WHERE S.YHBH= #{value} AND S.JLZT = '1')
	</select>
	
	<select id="findByGroupCode" parameterType="java.lang.String" resultMap="ipDocumentEncryptGroupVOMap_result">
	    SELECT * FROM IP_DOCUMENT_ENCRYPT_GROUP WHERE QXBM = #{qxbm}
	</select>
	
	<select id="countByGroupCode" resultType="java.lang.Integer" parameterType="com.cib.cap4j.cfn.encrypt.vo.IpDocumentEncryptGroupVO">
		select count(QXBM) from IP_DOCUMENT_ENCRYPT_GROUP where QXBM = #{qxbm}
		<if test="zj!=null and zj!='' ">
		   and ZJ <![CDATA[<>]]> #{zj}
		</if>
	</select>
	
	<select id="countByGroupName" resultType="java.lang.Integer" parameterType="com.cib.cap4j.cfn.encrypt.vo.IpDocumentEncryptGroupVO">
		select count(JMJBMC) from IP_DOCUMENT_ENCRYPT_GROUP where JMJBMC = #{jmjbmc}
		<if test="zj!=null and zj!='' ">
		   and ZJ <![CDATA[<>]]> #{zj}
		</if>
	</select>
</mapper>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cib.cap4j.cfn.information.dao.IIPInformationDao">
	<resultMap id="informationVO_result" type="com.cib.cap4j.cfn.information.vo.IPInformationVO">
        <id column="XXZJ" property="xxzj" />
        <result column="FBXXBH" property="fbxxbh" />
        <result column="FBXXBT" property="fbxxbt" />
        <result column="FBXXNR" property="fbxxnr" />
        <result column="BMCD" property="bmcd" />
        <result column="JJCD" property="jjcd" />
        <result column="QFJG" property="qfjg" />
        <result column="QFR" property="qfr" />
        <result column="SSDLM" property="ssdlm" />
        <result column="JSLX" property="jslx" />
        <result column="QFRQ" property="qfrq" />
        <result column="PXM" property="pxm" />
        <result column="XXZT" property="xxzt" />
        <result column="CJR" property="cjr" />
        <result column="CJRQ" property="cjrq" />
        <result column="ZHXGR" property="zhxgr" />
        <result column="ZHXGRQ" property="zhxgrq" />
        <result column="WDBH" property="wdbh" />
        <result column="JLZT" property="jlzt" />
    </resultMap>
	
  	<select id="getAllCount" resultType="int">
        select count(*) from IP_INFORMATION where JLZT = '1'
        <if test="fbxxbt != null and fbxxbt != ''"> and FBXXBT like ${fbxxbt}</if>
        <if test="xxzt != null and xxzt != ''"> and XXZT = #{xxzt}</if>
        <if test="qfrq_begin != null and qfrq_begin != ''"> and QFRQ &gt;= #{qfrq_begin}</if>
        <if test="qfrq_end != null and qfrq_end != ''"> and QFRQ &lt;= #{qfrq_end}</if>
    </select>
    
    <select id="findAll" resultMap="informationVO_result">
        select XXZJ, FBXXBT, XXZT, QFRQ, CJRQ
        from IP_INFORMATION where JLZT = '1' order by PXM
    </select>
    
    <select id="findCurPage" resultMap="informationVO_result">
        select 
        XXZJ, FBXXBH, FBXXBT, BMCD, JJCD,
        QFJG, QFR, SSDLM, JSLX, QFRQ,
        PXM, XXZT, CJR, CJRQ, ZHXGR,
        ZHXGRQ, WDBH, JLZT
        from IP_INFORMATION where JLZT = '1' 
        <if test="fbxxbt != null and fbxxbt != ''"> and FBXXBT like ${fbxxbt}</if>
        <if test="xxzt != null and xxzt != ''"> and XXZT = #{xxzt}</if>
        <if test="ssdlm != null and ssdlm != ''"> and SSDLM = #{ssdlm}</if>
        <if test="qfrq_begin != null and qfrq_begin != ''"> and QFRQ &gt;= #{qfrq_begin}</if>
        <if test="qfrq_end != null and qfrq_end != ''"> and QFRQ &lt;= #{qfrq_end}</if>
        order by PXM, QFRQ desc
    </select>
    
    <select id="findByKey" resultMap="informationVO_result" parameterType="java.util.HashMap">
        select * from IP_INFORMATION where JLZT = '1'
        <if test="key != null">and FBXXNR like ${key}</if>
		order by PXM, CJRQ desc
    </select>
    
    <select id="findById" resultMap="informationVO_result" parameterType="string">
        select * from IP_INFORMATION where JLZT = '1' and XXZJ = #{id}
    </select>
    
    <insert id="save" parameterType="com.cib.cap4j.cfn.information.vo.IPInformationVO">
        INSERT INTO IP_INFORMATION 
        (XXZJ, FBXXBH, FBXXBT, FBXXNR, BMCD, JJCD, QFJG, QFR, 
        SSDLM, JSLX, QFRQ, PXM, XXZT, CJR, CJRQ, ZHXGR, ZHXGRQ, WDBH, JLZT)
		values 
		(#{xxzj,jdbcType=VARCHAR}, #{fbxxbh,jdbcType=VARCHAR}, #{fbxxbt,jdbcType=VARCHAR}, #{fbxxnr,jdbcType=VARCHAR}, 
		#{bmcd,jdbcType=VARCHAR}, #{jjcd,jdbcType=VARCHAR}, #{qfjg,jdbcType=VARCHAR}, #{qfr,jdbcType=VARCHAR}, 
		#{ssdlm,jdbcType=VARCHAR}, #{jslx,jdbcType=VARCHAR}, #{qfrq,jdbcType=VARCHAR}, #{pxm,jdbcType=INTEGER}, 
		#{xxzt,jdbcType=VARCHAR}, #{cjr,jdbcType=VARCHAR}, #{cjrq,jdbcType=VARCHAR}, #{zhxgr,jdbcType=VARCHAR}, 
		#{zhxgrq,jdbcType=VARCHAR}, #{wdbh,jdbcType=VARCHAR}, #{jlzt,jdbcType=VARCHAR})
    </insert>
    
    <update id="update" parameterType="com.cib.cap4j.cfn.information.vo.IPInformationVO">
        update IP_INFORMATION
        	<set>
				<if test="fbxxbh != null">FBXXBH = #{fbxxbh,jdbcType=VARCHAR},</if>
				<if test="fbxxbt != null">FBXXBT = #{fbxxbt,jdbcType=VARCHAR},</if>
				<if test="fbxxnr != null">FBXXNR = #{fbxxnr,jdbcType=VARCHAR},</if>
				<if test="bmcd != null">BMCD = #{bmcd,jdbcType=VARCHAR},</if>
				<if test="jjcd != null">JJCD = #{jjcd,jdbcType=VARCHAR},</if>
				<if test="qfjg != null">QFJG = #{qfjg,jdbcType=VARCHAR},</if>
				<if test="qfr != null">QFR = #{qfr,jdbcType=VARCHAR},</if>
				<if test="ssdlm != null">SSDLM = #{ssdlm,jdbcType=VARCHAR},</if>
				<if test="jslx != null">JSLX = #{jslx,jdbcType=VARCHAR},</if>
				<if test="qfrq != null">QFRQ = #{qfrq,jdbcType=VARCHAR},</if>
				<if test="pxm != null">PXM = #{pxm,jdbcType=VARCHAR},</if>
				<if test="xxzt != null">XXZT = #{xxzt,jdbcType=VARCHAR},</if>
				<if test="cjr != null">CJR = #{cjr,jdbcType=VARCHAR},</if>
				<if test="cjrq != null">CJRQ = #{cjrq,jdbcType=VARCHAR},</if>
				<if test="zhxgr != null">ZHXGR = #{zhxgr,jdbcType=VARCHAR},</if>
				<if test="zhxgrq != null">ZHXGRQ = #{zhxgrq,jdbcType=VARCHAR},</if>
				<if test="wdbh != null">WDBH = #{wdbh,jdbcType=VARCHAR},</if>
				<if test="jlzt != null">JLZT = #{jlzt,jdbcType=VARCHAR}</if>
			</set>
        where XXZJ = #{xxzj}
    </update>

    <update id="delete_logic" parameterType="java.util.HashMap">
        update IP_INFORMATION
        	<set>
        		JLZT = '0', ZHXGR = #{zhxgr,jdbcType=VARCHAR}, ZHXGRQ = #{zhxgrq,jdbcType=VARCHAR}
			</set>
			where XXZJ in
			<foreach item="id" index="index" collection="idArr"
				open="(" separator="," close=")">
				#{id}
			</foreach>
    </update>
    
    <delete id="delete" parameterType="string">
        delete from IP_INFORMATION where XXZJ in
        <foreach item="item" index="index" collection="array"
			open="(" separator="," close=")">
			#{item}
		</foreach>
    </delete>
</mapper>